{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
    <h1>Create User</h1>

    <input id="username" placeholder="Username"><br>
    <input id="official_name" placeholder="Official Name"><br>
    <input id="email" placeholder="Email"><br>
    <input id="password" type="password" placeholder="Password"><br>

    <select id="role">
        <option value="student">Student</option>
        <option value="clinician">Clinician</option>
        <option value="admin">Admin</option>
    </select><br>

    <input id="phone" placeholder="Phone"><br>

    <button id="saveBtn">Save</button>
</div>

<script>
$('#saveBtn').click(function () {
    $.ajax({
        url: '/api/user/create/',
        type: 'POST',
        headers: { 'X-CSRFToken': CSRFTOKEN },
        data: {
            username: $('#username').val(),
            official_name: $('#official_name').val(),
            email: $('#email').val(),
            password: $('#password').val(),
            role: $('#role').val(),
            phone: $('#phone').val()
        },
        success: function () {
            window.location.href = '/users/';
        },
        error: function (xhr) {
            alert(JSON.stringify(xhr.responseJSON));
        }
    });
});
</script>
{% endblock %}
